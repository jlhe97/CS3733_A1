package jherreroestrada;

import junit.framework.TestCase;
import ks.client.gamefactory.GameWindow;
import ks.common.model.Card;
import ks.common.model.Deck;
import ks.launcher.Main;

public class TestDealCardMove extends TestCase {

	
	MountOlympus mountOlympus;
	GameWindow gw;
	
	@Override
	protected void setUp() {
		mountOlympus = new MountOlympus();
		gw = Main.generateWindow(mountOlympus, Deck.OrderBySuit);
	}
	
	@Override
	protected void tearDown() {
		gw.dispose();
	}
	
	public void testDealCardMove() {
		
		
		
		DealCardMove dcm = new DealCardMove(mountOlympus.deck, mountOlympus.columns);
		
		assertTrue(dcm.valid(mountOlympus));
		
		dcm.doMove(mountOlympus);
		
		assertEquals(70, mountOlympus.deck.count());
		
		for(int i = 0; i < mountOlympus.columns.length; i++){
			Card topCard = mountOlympus.deck.peek(mountOlympus.deck.count() - (i + 1));
			assertEquals(topCard, mountOlympus.columns[i].peek());
		}
		
		int value = mountOlympus.getNumLeft().getValue();
		
		assertEquals(70, value);
		
		dcm.undo(mountOlympus);
		
		assertEquals(79, mountOlympus.deck.count());
		
	}
}
